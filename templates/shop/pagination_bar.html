<div class="pagination-bar sticky-pagination">
    <div class="pagination-left">
        {% if page_obj.paginator.num_pages > 1 %}
            {% with page=page_obj.number num_pages=page_obj.paginator.num_pages %}
                {% if page_obj.has_previous %}
                    {% if category %}
                        <a href="/{{ category.slug }}/?page={{ page_obj.previous_page_number }}{% if request.GET.view %}&view={{ request.GET.view }}{% endif %}"
                           class="pagination-link page-arrow pagination" aria-label="Previous page"
                           hx-get="/{{ category.slug }}/?page={{ page_obj.previous_page_number }}"
                           hx-target="#product-list-container"
                           hx-push-url="true"
                           hx-swap="outerHTML"
                           hx-indicator="#loading-indicator">
                    {% else %}
                        <a href="?page={{ page_obj.previous_page_number }}{% if request.GET.view %}&view={{ request.GET.view }}{% endif %}"
                           class="pagination-link page-arrow pagination" aria-label="Previous page"
                           hx-get="?page={{ page_obj.previous_page_number }}"
                           hx-target="#product-list-container"
                           hx-push-url="true"
                           hx-swap="outerHTML"
                           hx-indicator="#loading-indicator">
                    {% endif %}
                        <span class="arrow-bg">
                          <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M12.354 14.646a.5.5 0 0 1-.708.708l-5-5a.5.5 0 0 1 0-.708l5-5a.5.5 0 0 1 .708.708L7.707 10l4.647 4.646z" fill="currentColor"/>
                          </svg>
                        </span>
                    </a>
                {% else %}
                    <span class="pagination-link page-arrow disabled" tabindex="-1" aria-disabled="true">
                        <span class="arrow-bg">
                          <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M12.354 14.646a.5.5 0 0 1-.708.708l-5-5a.5.5 0 0 1 0-.708l5-5a.5.5 0 0 1 .708.708L7.707 10l4.647 4.646z" fill="currentColor"/>
                          </svg>
                        </span>
                    </span>
                {% endif %}
                <form class="pagination-jump-form" onsubmit="return false;">
                    <input type="text" inputmode="numeric" pattern="[0-9]*" min="1" max="{{ num_pages }}" value="{{ page }}" class="pagination-jump-input page-num{% if num_pages == 1 %} single{% endif %}" id="pagination-jump-input-{% if show_view_toggle %}top{% else %}bottom{% endif %}" autocomplete="off" />
                    <button type="submit" style="display:none"></button>
                    <span class="pagination-total">z {{ num_pages }}</span>
                </form>
                {% if page_obj.has_next %}
                    {% if category %}
                        <a href="/{{ category.slug }}/?page={{ page_obj.next_page_number }}{% if request.GET.view %}&view={{ request.GET.view }}{% endif %}"
                           class="pagination-link page-arrow pagination" aria-label="Next page"
                           hx-get="/{{ category.slug }}/?page={{ page_obj.next_page_number }}"
                           hx-target="#product-list-container"
                           hx-push-url="true"
                           hx-swap="outerHTML"
                           hx-indicator="#loading-indicator">
                    {% else %}
                        <a href="?page={{ page_obj.next_page_number }}{% if request.GET.view %}&view={{ request.GET.view }}{% endif %}"
                           class="pagination-link page-arrow pagination" aria-label="Next page"
                           hx-get="?page={{ page_obj.next_page_number }}"
                           hx-target="#product-list-container"
                           hx-push-url="true"
                           hx-swap="outerHTML"
                           hx-indicator="#loading-indicator">
                    {% endif %}
                        <span class="arrow-bg">
                          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" style="transform: scaleX(-1);">
                            <path d="M12.354 14.646a.5.5 0 0 1-.708.708l-5-5a.5.5 0 0 1 0-.708l5-5a.5.5 0 0 1 .708.708L7.707 10l4.647 4.646z" fill="currentColor"/>
                          </svg>
                        </span>
                    </a>
                {% else %}
                    <span class="pagination-link page-arrow disabled" tabindex="-1" aria-disabled="true">
                        <span class="arrow-bg">
                          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" style="transform: scaleX(-1);">
                            <path d="M12.354 14.646a.5.5 0 0 1-.708.708l-5-5a.5.5 0 0 1 0-.708l5-5a.5.5 0 0 1 .708.708L7.707 10l4.647 4.646z" fill="currentColor"/>
                          </svg>
                        </span>
                    </span>
                {% endif %}
            {% endwith %}
        {% endif %}
    </div>
    {% if show_view_toggle %}
    <div class="view-toggle">
        <button type="button" class="view-btn {% if current_view == 'grid' %}active{% endif %}" id="grid-btn" data-view="grid" aria-label="Grid view">
            <svg width="20" height="20" viewBox="0 0 20 20"><rect x="2" y="2" width="6" height="6" rx="2"/><rect x="12" y="2" width="6" height="6" rx="2"/><rect x="2" y="12" width="6" height="6" rx="2"/><rect x="12" y="12" width="6" height="6" rx="2"/></svg>
        </button>
        <button type="button" class="view-btn {% if current_view == 'list' %}active{% endif %}" id="list-btn" data-view="list" aria-label="List view">
            <svg width="20" height="20" viewBox="0 0 20 20"><rect x="3" y="4" width="14" height="2" rx="1"/><rect x="3" y="9" width="14" height="2" rx="1"/><rect x="3" y="14" width="14" height="2" rx="1"/></svg>
        </button>
    </div>
    {% endif %}
</div> 