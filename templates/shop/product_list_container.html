{% load i18n static shop_extras %}

<!-- DEBUG: Template rendering info -->
<!-- Category: {{ category|default:'NULL' }} -->
<!-- Category slug: {{ category.slug|default:'NO-SLUG' }} -->
<!-- Category name: {{ category.name|default:'NO-NAME' }} -->

<div id="product-list-container" data-current-category="{% if category %}{{ category.slug }}{% else %}all{% endif %}" data-debug-category="{{ category|default:'NONE' }}" data-debug-slug="{{ category.slug|default:'NO-SLUG' }}">
    {% include 'shop/pagination_bar.html' with show_view_toggle=True %}
    <div id="product-list" class="product-{{ current_view|default:'grid' }}" data-view="{{ current_view|default:'grid' }}">
        {% for product in products %}
        <div class="product-card product-row">
            <a href="{% url 'category_or_product' product.slug %}" class="product-link">
                <div class="product-image-container">
                    <img src="{{ product|get_product_image }}" alt="{{ product|get_product_alt_text }}" class="product-image" />
                </div>
                <span class="product-info">
                  <h2 class="product-title">{{ product.name }}</h2>
                  <span class="product-price">
                    {% if product.discount_price %}
                        <span class="old-price">{{ product.price }} zł</span>
                        <span class="discount-price">{{ product.discount_price }} zł</span>
                    {% else %}
                        {{ product.price }} zł
                    {% endif %}
                  </span>
                </span>
            </a>
        </div>
        {% empty %}
        <div class="no-products">{% trans 'No products found.' %}</div>
        {% endfor %}
    </div>
    {% include 'shop/pagination_bar.html' with show_view_toggle=False %}
</div> 