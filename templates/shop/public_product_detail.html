{% extends 'base.html' %}
{% load i18n static %}

{% block content %}
<div class="main-container">
    <div class="product-detail-card">
        <div class="product-detail-image-col">
            {% if product.image %}
                <img src="{{ product.image.url }}" alt="{{ product.name }}" class="product-detail-image" />
            {% else %}
                <div class="no-image">{% trans 'No image' %}</div>
            {% endif %}
        </div>
        <div class="product-detail-info-col">
            <h1 class="product-detail-title">{{ product.name }}</h1>
            <div class="product-detail-price">
                {% if product.discount_price %}
                    <span class="old-price">{{ product.price }} zł</span>
                    <span class="discount-price">{{ product.discount_price }} zł</span>
                {% else %}
                    {{ product.price }} zł
                {% endif %}
            </div>
            <div class="product-detail-desc">
                {{ product.description|linebreaksbr }}
            </div>
            <form method="post" action="{% url 'cart_view' %}" class="product-detail-form">
                {% csrf_token %}
                <input type="hidden" name="product_id" value="{{ product.id }}" />
                <label for="quantity">{% trans 'Quantity' %}:</label>
                <input type="number" name="quantity" id="quantity" value="1" min="1" max="{{ product.stock }}" class="product-detail-qty" {% if product.stock == 0 %}disabled{% endif %} />
                <button type="submit" class="cta-btn btn-primary" {% if product.stock == 0 %}disabled{% endif %}>
                    {% if product.stock == 0 %}
                        {% trans 'Out of stock' %}
                    {% else %}
                        {% trans 'Add to cart' %}
                    {% endif %}
                </button>
            </form>
            <div class="product-detail-stock">
                {% trans 'Stock' %}: {{ product.stock }}
            </div>
        </div>
    </div>
    <div class="product-detail-back">
        <a href="{% url 'shop:public_product_list' %}" class="product-detail-back-link">&larr; {% trans 'Back to shop' %}</a>
    </div>
</div>
{% endblock %} 